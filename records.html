<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JT Auto Services Records</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; margin: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h1 { color: #1a73e8; text-align: center; margin-bottom: 5px; }
        p.subtitle { text-align: center; color: #666; margin-bottom: 30px; }
        
        .balance-card { background: #1a73e8; color: white; padding: 20px; border-radius: 8px; text-align: center; margin-bottom: 25px; }
        .balance-card h2 { margin: 0; font-size: 2em; }

        form { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; background: #fafafa; padding: 20px; border-radius: 8px; border: 1px solid #eee; }
        .form-group { display: flex; flex-direction: column; }
        label { font-weight: 600; margin-bottom: 5px; color: #444; font-size: 0.9em; }
        input, select { padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 1em; }
        
        button { grid-column: span 1; padding: 12px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: background 0.3s; }
        button:hover { background-color: #218838; }
        .print-btn { background-color: #007bff; }
        .print-btn:hover { background-color: #0056b3; }


        table { width: 100%; border-collapse: collapse; margin-top: 30px; background: white; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background-color: #f8f9fa; color: #555; text-transform: uppercase; font-size: 0.8em; }
        .credit { color: #28a745; font-weight: bold; }
        .debit { color: #dc3545; font-weight: bold; }
        .rm-symbol { font-size: 0.9em; color: #888; margin-right: 2px; }

        /* --- Print Specific Styles --- */
        @media print {
            body { background-color: white; margin: 0; padding: 0; font-size: 11pt; }
            .container { box-shadow: none; margin: 0; padding: 0 10px; }
            /* Hide elements not needed on the printed page */
            .no-print { display: none !important; } 
            h1, p.subtitle { color: black; }
            .balance-card { background: #eee; color: black; border: 1px solid #ddd; }
            table, th, td { border-color: #aaa !important; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>J T Services</h1>
    <p class="subtitle">Financial Transaction Record</p>

    <div class="balance-card">
        <small>Current Balance</small>
        <h2>RM <span id="totalBalance">0.00</span></h2>
    </div>
    
    <!-- Print Button Added Here -->
    <button onclick="window.print()" class="print-btn no-print" style="width: 100%; margin-bottom: 20px;">üñ®Ô∏è Simpan sebagai PDF</button>

    <form id="recordForm" class="no-print">
        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" required>
        </div>
        <div class="form-group" style="flex-grow: 2;">
            <label for="detail">Detail / Description</label>
            <input type="text" id="detail" placeholder="Nature of transaction" required>
        </div>
        <div class="form-group">
            <label for="amount">Amount (RM)</label>
            <input type="number" id="amount" step="0.01" placeholder="0.00" required>
        </div>
        <div class="form-group">
            <label for="type">Type</label>
            <select id="type">
                <option value="credit">Credit (Income)</option>
                <option value="debit">Debit (Expense)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="payment">Payment Via</label>
            <select id="payment">
                <option value="Cash">Cash</option>
                <option value="Online Banking">Online Banking</option>
                <option value="QR Code">QR Code</option>
            </select>
        </div>
        <button type="submit">Add Record</button>
    </form>

    <table id="ledgerTable">
        <thead>
            <tr>
                <th>Date</th>
                <th>Detail</th>
                <th>Payment Via</th>
                <th>Type</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            <!-- Dynamic Rows Appear Here -->
        </tbody>
    </table>
</div>

<script>
    // 1. Auto-fill Today's Date
    window.onload = function() {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').value = today;
    };

    let balance = 0;
    const form = document.getElementById('recordForm');
    const tableBody = document.querySelector('#ledgerTable tbody');
    const balanceDisplay = document.getElementById('totalBalance');

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        // Get Input Data
        const date = document.getElementById('date').value;
        const detail = document.getElementById('detail').value;
        const amount = parseFloat(document.getElementById('amount').value);
        const type = document.getElementById('type').value;
        const payment = document.getElementById('payment').value;

        // Update Running Balance
        if (type === 'credit') {
            balance += amount;
        } else {
            balance -= amount;
        }

        // Create Table Row
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${date}</td>
            <td>${detail}</td>
            <td>${payment}</td>
            <td class="${type}">${type.toUpperCase()}</td>
            <td><span class="rm-symbol">RM</span>${amount.toFixed(2)}</td>
        `;

        // Add row to top of list
        tableBody.prepend(row);

        // Update Balance UI
        balanceDisplay.textContent = balance.toFixed(2);
        
        // Optional: Update balance card color based on balance sign
        const balanceCard = document.querySelector('.balance-card');
        if (balance < 0) {
            balanceCard.style.backgroundColor = '#dc3545'; // Red for negative
        } else {
             balanceCard.style.backgroundColor = '#1a73e8'; // Blue otherwise
        }

        // Reset fields (keeping the date as current)
        document.getElementById('detail').value = '';
        document.getElementById('amount').value = '';
    });
</script>

</body>
</html>
